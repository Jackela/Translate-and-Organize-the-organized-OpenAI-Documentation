# 错误码

[参考原文](https://platform.openai.com/docs/guides/error-codes)

# API 错误码

| 代码 | 概览 |
| --- | --- |
| 401 - 无效的身份验证 | 原因：无效的身份验证解决方案：确保使用正确的API 密钥和请求的组织。 |
| 401 - 提供的API密钥不正确 | 原因：请求的API密钥不正确。解决方案：确保使用的API密钥正确，清除浏览器缓存或https://platform.openai.com/account/api-keys。 |
| 401 - 您必须是组织的成员才能使用API | 原因：您的帐户不属于组织。解决方案：联系OpenAI以加入新组织或要求您的组织管理人员https://platform.openai.com/account/members。 |
| 429 - 请求速率达到限制 | 原因：您发送请求过快。解决方案：放缓您的请求。参阅%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6%200471847fe50648578f3bc38f0277d984.md文档。 |
| 429 - 您已超过当前配额，请检查您的计划和帐单详细信息 | 原因：您已达到您的最大月度支出（硬限制），您可以在https://platform.openai.com/account/billing/limits中查看。解决方案：提交https://platform.openai.com/forms/quota-increase%E3%80%82表格。 |
| 429 - 引擎当前过载，请稍后再试 | 原因：OpenAI的服务器正在经历高交通量。解决方案：请在短暂等待后重试您的请求。 |
| 500 - 服务器在处理您的请求时出错 | 原因：OpenAI的服务器出现问题。解决方案：在短暂等待后重试您的请求，如果问题仍然存在，请与OpenAI联系。检查OpenAI的https://status.openai.com/。 |

## **401 - 无效身份验证**

此错误消息表示您的身份验证凭据无效。这可能会发生很多原因，例如：

- 您正在使用已撤销的API密钥。
- 您正在使用与请求组织分配的API密钥不同的API密钥。
- 您正在使用的API密钥没有调用您正在调用的终端点所需的权限。

要解决此错误，请按照以下步骤操作：

- 检查您是否在请求标头中使用了正确的API密钥和组织ID。您可以在[账户设置](https://platform.openai.com/account/api-keys)中找到您的API密钥和组织ID。
- 如果您不确定您的API密钥是否有效，您可以[生成一个新的API密钥](https://platform.openai.com/account/api-keys)。确保用新的API密钥替换旧的API密钥，并遵循[实践指南](API%20%E5%AF%86%E9%92%A5%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97%20e02634357b4243639a6dbb49b20b6768.md)。

## **401 -** 提供的 API 密钥不正确

此错误信息表示您在请求中使用的 API 密钥不正确。这可能由多种原因引起，例如：

- API 密钥中含有拼写错误或额外的空格。
- 您正在使用属于不同组织的 API 密钥。
- 您正在使用已删除或停用的 API 密钥。
- 本地缓存可能存在旧的已吊销的 API 密钥。

要解决此错误，请按照以下步骤操作：

- 尝试清除您的浏览器缓存和 Cookie，然后再次尝试。
- 检查您的请求头中是否使用了正确的 API 密钥。
- 如果您不确定您的 API 密钥是否正确，您可以生成一个新的 API 密钥。请确保在您的代码库中替换您的旧 API 密钥，并遵循[实践指南](API%20%E5%AF%86%E9%92%A5%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97%20e02634357b4243639a6dbb49b20b6768.md)。

## **401 - 您必须是组织的成员才能使用API**

这个错误信息表示您的帐户不属于任何组织。这可能由于以下原因之一引起：

- 您已经离开或被移出您之前所在的组织。
- 您所在的组织已被删除。

要解决此错误，请按照以下步骤进行：

- 如果您已经离开或被移出您之前所在的组织，则可以请求一个新的组织或被邀请加入现有的组织。
- 要请求一个新的组织，请通过 [help.openai.com](http://help.openai.com/) 与OpenAI联系。
- 现有组织的所有者可以通过 [成员面板](https://platform.openai.com/account/members) 邀请您加入他们的组织。

## 429 - 请求速率限制达到上限

此错误消息表示您已达到API的分配速率限制。这意味着您在短时间内提交了太多令牌或请求，超过了允许的请求数。这可能由于以下原因而发生：

- 您正在使用频繁或并发请求的循环或脚本。
- 您正在与其他用户或应用程序共享API密钥。
- 您正在使用速率限制较低的免费计划。

要解决此错误，请按照以下步骤操作：

- 缓慢请求并避免进行不必要或冗余的调用。
- 如果您正在使用循环或脚本，请确保实现了后退机制或重试逻辑，以尊重速率限制和响应标头。您可以在[速率限制](%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6%200471847fe50648578f3bc38f0277d984.md)文档中阅读更多关于OpenAI的速率限制政策和最佳实践。
- 如果您正在与其他用户共享组织，请注意限制是针对组织而不是用户应用的。值得注意的是，检查您团队的其余使用情况，这将有助于限制。
- 如果您正在使用免费或低端计划，请考虑升级为按需付费计划，该计划提供更高的速率限制。您可以在[速率限制](%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6%200471847fe50648578f3bc38f0277d984.md)文档中比较每个计划的限制。

## 429-您已超过当前配额，请检查您的计划和结算明细

此错误消息表示您已达到API的最大月度支出。您可以在[帐户结算设置](notion://www.notion.so/account/billing/limits)中查看您的最大月度限制下的“硬限制”。这意味着您已使用您计划分配的所有积分，并已达到当前结算周期的限制。这可能会发生出现以下几种情况:

- 您正在使用大量或复杂的服务，这些服务消耗了大量credits点数或tokens。
- 您的限制对于您的组织使用来说过低了。

若要解决此错误，请执行以下操作:

- 在[帐户设置](https://platform.openai.com/account/billing/limits)中检查您当前的配额。您可以在帐户的[使用部分](https://platform.openai.com/account/usage)中查看您的请求已消耗多少tokens。
- 如果您正在使用免费计划，请考虑升级为按需付费计划，以提供更高的配额。
- 如果您需要增加配额，请[申请增加](https://platform.openai.com/forms/quota-increase)并提供有关预期使用情况的相关详细信息。OpenAI团队将审核您的请求，并在大约7-10个工作日内答复您。

## 429 - 引擎目前超载，请稍后再试

此错误消息表示OpenAI的服务器正在经历高流量，目前无法处理您的请求。这可能会发生多种原因，例如：

- OpenAI的服务突然遭受需求激增或激增。
- OpenAI的服务器计划或未计划的维护或更新。
- OpenAI的服务器出现了意外或不可避免的停机或事故。

要解决此错误，请按照以下步骤操作：

- 在短暂等待后重试您的请求。OpenAI建议使用指数退避策略或遵守响应标头和速率限制的重试逻辑。您可以阅读[有关速率限制的实践指南](%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6%E5%AE%9E%E8%B7%B5%E6%8C%87%E5%8D%97%20411017f6034940e782a45e075a725e1d.md)。
- 检查OpenAI的[状态页面](https://status.openai.com/)，以获取有关OpenAI的服务和服务器的任何更新或公告。
- 如果您在合理的时间内仍然遇到此错误，请联系OpenAI寻求进一步的帮助。

# **Python库错误类型**

| 类型 | 概览 |
| --- | --- |
| APIError | 原因：OpenAI方面出了问题。
解决方案：暂停一段时间后重试，如果问题仍然存在，请联系OpenAI。 |
| Timeout | 原因：请求超时。
解决方案：暂停一段时间后重试，如果问题仍然存在，请联系OpenAI。 |
| RateLimitError | 原因：您已达到分配的请求限制。
解决方案：控制您的请求速度。请参考%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6%200471847fe50648578f3bc38f0277d984.md文档。 |
| APIConnectionError | 原因：连接OpenAI服务时出现问题。
解决方案：检查您的网络设置、代理配置、SSL证书或防火墙规则。 |
| InvalidRequestError | 原因：您的请求格式不正确或缺少一些必需的参数，例如token或输入。
解决方案：错误消息应该会提示您具体的错误。请参阅API%20%E5%8F%82%E8%80%83%20c2bed70f8d8342f9b28c55322830f7f5.md文档并确保您发送的参数是有效和完整的。您可能还需要检查请求数据的编码、格式或大小。 |
| AuthenticationError | 原因：您的API密钥或令牌无效、过期或已被撤销。
解决方案：检查您的API密钥或令牌，确保它是正确和有效的。您可能需要从您的帐户面板https://platform.openai.com/account/api-keys。 |
| ServiceUnavailableError | 原因：OpenAI的服务器出了问题。
解决方案：暂停一段时间后重试，如果问题仍然存在，请联系OpenAI。检查OpenAI的https://status.openai.com/。 |

# 附录

## API错误

`APIError`表示在处理您的请求时OpenAI出现了错误。这可能是由于临时错误、错误或系统故障引起的。

可以[OpenAI的系统状态页面](https://status.openai.com/)获取更多信息。

如果您遇到`APIError`，请尝试以下步骤：

- 等待几秒钟并重试您的请求。有时，问题可能会迅速解决，您的请求可能会在第二次尝试时成功。
- 检查我们的状态页面，了解可能影响我们服务的任何正在进行的事件或维护。如果有活动事件，请跟随更新并等待其解决后再重试您的请求。
- 如果问题仍然存在，请查看**持续性错误**。

您也可以[在OpenAI的社区论坛中发帖](https://community.openai.com/)，但请务必省略任何敏感信息。

## 超时错误

`Timeout`错误表示您的请求花费的时间太长，导致OpenAI的服务器关闭连接。这可能是由于网络问题，OpenAI的服务负载过重或需要更多处理时间的复杂请求。

如果遇到`Timeout`错误，请尝试以下步骤：

- 等待几秒钟并重试您的请求。有时，网络拥堵或OpenAI的服务负载可能会减少，您的第二次尝试可能会成功。
- 检查您的网络设置并确保您拥有稳定且快速的互联网连接。您可能需要切换到不同的网络，使用有线连接或减少使用带宽的设备或应用程序的数量。
- 如果问题仍然存在，请查看**持续性错误**。

## 速率限制错误

`RateLimitError`表示您已经达到了分配的速率限制。这意味着在一定时间内您发送了太多的令牌或请求，我们的服务已经暂时阻止您继续发送。

我们实施速率限制是为了确保公平有效地使用我们的资源，并防止滥用或过载我们的服务。

如果您遇到`RateLimitError`，请尝试以下步骤：

- 发送更少的token或请求，或者减慢速度。您可能需要减少请求的频率或数量，批量处理您的令牌，或实施指数回退。您可以阅读[速率限制](%E9%80%9F%E7%8E%87%E9%99%90%E5%88%B6%200471847fe50648578f3bc38f0277d984.md)文档获取更多详细信息。
- 等待您的速率限制重置（一分钟）并重试请求。错误消息应该给您一个使用率和允许使用率的概念。
- 您还可以从您的[帐户面板](https://platform.openai.com/account/usage)检查您的API使用统计数据。

## API连接错误

`APIConnectionError` 表示你的请求无法到达OpenAI的服务器或建立安全连接。这可能是由于网络问题、代理配置、SSL 证书或防火墙规则引起的。

如果你遇到了 `APIConnectionError`，请尝试以下步骤：

- 检查你的网络设置，确保你拥有稳定快速的互联网连接。你可能需要切换到另一个网络，使用有线连接，或减少使用你带宽的设备或应用程序。
- 检查你的代理配置，确保它与OpenAI的服务兼容。你可能需要更新代理设置，使用不同的代理，或完全绕过代理。
- 检查你的 SSL 证书，确保它们有效且更新。你可能需要安装或更新你的证书，使用不同的证书颁发机构，或禁用 SSL 验证。
- 检查你的防火墙规则，确保它们不会阻止或过滤OpenAI的服务。你可能需要修改防火墙设置。
- 如果合适，检查你的容器是否具有正确的权限来发送和接收流量。
- 如果问题仍然存在，请查看**持久性错误**下一步操作部分。

## 无效请求错误

**`InvalidRequestError`** 表示您的请求格式错误或缺少某些必需的参数，例如令牌或输入。这可能是由于代码中的拼写错误、格式错误或逻辑错误导致的。

如果您遇到 **`InvalidRequestError`**，请尝试以下步骤：

- 仔细阅读错误消息，确定具体的错误。错误消息应该会提示您哪个参数是无效或缺失的，并且期望什么值或格式。
- 检查您正在调用的特定 API 方法的 [API 参考](API%20%E5%8F%82%E8%80%83%20c2bed70f8d8342f9b28c55322830f7f5.md)文档，并确保您发送的参数有效且完整。您可能需要查看参数名称、类型、值和格式，并确保它们与文档相匹配。
- 检查您的请求数据的编码、格式或大小，并确保它们与我们的服务兼容。您可能需要将数据编码为 UTF-8，将数据格式化为 JSON，或者如果数据太大则压缩数据。
- 使用 Postman 或 curl 等工具测试您的请求，并确保它按预期工作。您可能需要调试代码并修复请求逻辑中的任何错误或不一致性。
- 如果问题仍然存在，请查看我们的持久性错误下一步操作部分。

## **身份验证错误**

`AuthenticationError`表示您的API密钥或令牌无效、过期或被撤销。这可能是由于打字错误、格式错误或安全漏洞造成的。

如果您遇到`AuthenticationError`，请尝试以下步骤：

- 检查您的API密钥或令牌，并确保它是正确且活动的。您可能需要从API密钥仪表板生成新的密钥，确保没有额外的空格或字符，或者如果您有多个密钥或令牌，则使用不同的密钥或令牌。
- 确保您已遵循正确的格式。

服务不可用错误

`ServiceUnavailableError`表示OpenAI的服务器暂时无法处理您的请求。这可能是由于计划维护、非计划维护、系统升级或服务器故障。这些错误也可能在高流量期间返回。

如果您遇到了`ServiceUnavailableError`，请尝试以下步骤：

- 等待几分钟并重试您的请求。有时问题可能会很快解决，您的请求可能会在下一次尝试时成功。
- 检查OpenAI的[状态页面](https://status.openai.com/)是否有任何影响OpenAI服务的正在进行的事件或维护。如果有活动事件，请跟随更新并等待其解决，然后再重试您的请求。
- 如果问题仍然存在，请查看**持续性错误**下一步操作部分。

## **持续性错误**

如果问题仍然存在，请通过聊天与OpenAI的支持团队[联系](https://help.openai.com/en/)，并提供以下信息：

- 您使用的模型
- 您收到的错误消息和代码
- 您发送的请求数据和标头
- 您请求的时间戳和时区
- 任何其他可能帮助我们诊断问题的相关细节

OpenAI的支持团队将调查此问题，并尽快回复您。

请注意，由于高需求，OpenAI的支持队列时间可能较长。

您也可以在OpenAI的[社区论坛](https://community.openai.com/)上发布，但请务必省略任何敏感信息。

## **处理错误**

以编程方式处理API返回的错误。为此，您可以使用以下代码片段：

```python
try:
  #在这里发出您的 OpenAI API 请求。
  response = openai.Completion.create(prompt="Hello world",
                                      model="text-davinci-003")
except openai.error.APIError as e:
  #在这里处理 API 错误，例如重试或记录日志。
  print(f"OpenAI API returned an API Error: {e}")
  pass
except openai.error.APIConnectionError as e:
  #在这里处理连接错误。
  print(f"Failed to connect to OpenAI API: {e}")
  pass
except openai.error.RateLimitError as e:
  #处理速率限制错误 (建议使用指数退避策略)。
  print(f"OpenAI API request exceeded rate limit: {e}")
  pass
```